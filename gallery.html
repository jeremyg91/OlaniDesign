<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Our Work | Olani Designs — Custom Signs on Hawaii Island</title>
  <meta name="description" content="Browse handcrafted signage by Olani Designs. Local craft on Hawaii Island with US-wide shipping." />
  <link rel="canonical" href="https://olanidesign.com/gallery.html" />

  <!-- Social cards -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Our Work | Olani Designs" />
  <meta property="og:description" content="Hand crafted signage from Hawaii Island." />
  <meta property="og:url" content="https://olanidesign.com/gallery.html" />
  <meta property="og:image" content="https://olanidesign.com/assets/img/hero-cover.jpg" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Performance -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
    :root { --brand:#2B5A8B; --brand-dark:#1E4161; --text:#333; --bg:#f9f9f9; }
    * { box-sizing: border-box; }
    html { font-family: Montserrat, Arial, sans-serif; }
    body { margin:0; background:var(--bg); color:var(--text); line-height:1.6; }

    /* Accessibility helpers */
    .skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;}
    .skip-link:focus{left:8px;top:8px;width:auto;height:auto;padding:.5rem 1rem;background:#fff;box-shadow:0 0 0 2px var(--brand);z-index:1000}

    /* Header */
    header { background:#fff; box-shadow:0 2px 10px rgba(0,0,0,.1); padding:15px 5%; position:sticky; top:0; z-index:100; display:flex; gap:24px; align-items:center; justify-content:space-between; }
    .logo { width:200px; height:auto; }
    nav ul { list-style:none; display:flex; gap:10px; margin:0; padding:0; }
    nav a { text-decoration:none; color:#333; font-weight:600; border-bottom:2px solid transparent; padding:8px 12px; }
    nav a:hover, nav a[aria-current="page"] { color:var(--brand); border-bottom-color:var(--brand); }
    @media (max-width:768px){ header{flex-wrap:wrap} .logo{width:180px} }

    /* Page title */
    .gallery-container { padding:48px 5%; max-width:1200px; margin:0 auto; }
    .gallery-title { text-align:center; font-size:clamp(1.8rem,4vw,2.5rem); margin-bottom:28px; color:var(--brand); }

    /* Grid */
    .gallery-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(240px, 1fr)); gap:18px; }
    .gallery-item { position:relative; cursor:pointer; overflow:hidden; border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,.1); background:#eee; aspect-ratio:4/3; }
    .gallery-item img { width:100%; height:100%; object-fit:cover; display:block; transition:transform .25s ease-in-out; }
    .gallery-item:hover img { transform:scale(1.03); }
    .caption { position:absolute; inset:auto 0 0 0; background:rgba(0,0,0,.6); color:#fff; text-align:center; padding:8px; font-size:.95rem; opacity:0; transition:opacity .2s; }
    .gallery-item:hover .caption { opacity:1; }
    @media (prefers-reduced-motion: reduce){ .gallery-item img{transition:none} .gallery-item:hover img{transform:none} .caption{transition:none} }

    /* Modal */
    .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,.9); z-index:1000; overflow:hidden; align-items:center; justify-content:center; flex-direction:column; padding:20px; }
    .modal.active { display:flex; }
    .modal img { max-width:92vw; max-height:78vh; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,.5); }
    .caption-box { color:#fff; margin-top:10px; text-align:center; max-width:92vw; }
    .caption-title { font-size:1.2rem; font-weight:700; }
    .caption-desc { font-size:.98rem; opacity:.9; }

    .btn-ctrl { position:absolute; top:50%; transform:translateY(-50%); font-size:2rem; color:#fff; background:rgba(0,0,0,.4); border:none; border-radius:50%; padding:10px 14px; cursor:pointer; user-select:none; }
    .btn-ctrl:hover { background:rgba(0,0,0,.7); }
    #btn-prev { left:16px; }
    #btn-next { right:16px; }
    #btn-close { top:18px; right:24px; transform:none; font-size:2rem; }

    /* Footer */
    footer { background:var(--brand); color:#fff; text-align:center; padding:24px 5%; margin-top:40px; }
    footer a { color:#fff; text-decoration:underline; }
  </style>
</head>
<body>
<a class="skip-link" href="#main">Skip to content</a>

<header>
  <a href="/" aria-label="Olani Designs home">
    <img src="/FullLogo_Transparent.png" alt="Olani Designs" class="logo" width="200" height="60" />
  </a>
  <nav aria-label="Primary">
    <ul>
      <li><a href="/index.html">Home</a></li>
      <li><a href="/gallery.html" class="active" aria-current="page">Our Work</a></li>
      <li><a href="/about.html">About</a></li>
      <li><a href="/contact.html">Contact</a></li>
    </ul>
  </nav>
</header>

<main id="main" class="gallery-container">
  <h1 class="gallery-title">Our Work</h1>
  <div class="gallery-grid" id="gallery-grid" aria-live="polite"></div>
</main>

<!-- Modal -->
<div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
  <button class="btn-ctrl" id="btn-close" aria-label="Close">&times;</button>
  <button class="btn-ctrl" id="btn-prev" aria-label="Previous">&#10094;</button>
  <img id="modal-img" src="" alt="">
  <div class="caption-box">
    <div id="modal-title" class="caption-title"></div>
    <div id="modal-desc" class="caption-desc"></div>
  </div>
  <button class="btn-ctrl" id="btn-next" aria-label="Next">&#10095;</button>
</div>

<footer>
  <p>&copy; <span id="y"></span> Olani Designs. All rights reserved.</p>
  <p style="opacity:.9">Hawaiʻi Island • <a href="tel:+18080000000">(808) 000-0000</a> • <a href="mailto:hello@olanidesign.com">hello@olanidesign.com</a></p>
</footer>

<!-- Card template -->
<template id="card-tpl">
  <div class="gallery-item">
    <img loading="lazy" decoding="async" alt="">
    <div class="caption"></div>
  </div>
</template>

<script>
  // Config
  const username = "jeremyg91";
  const repo     = "OlaniDesign";
  const branch   = "main";
  const folder   = "images"; // where your images live
  // Optional: use thumbnails. Set thumb path via gallery.json if available.

  // Elements
  const galleryGrid = document.getElementById('gallery-grid');
  const modal = document.getElementById('modal');
  const modalImg = document.getElementById('modal-img');
  const modalTitle = document.getElementById('modal-title');
  const modalDesc = document.getElementById('modal-desc');
  const btnClose = document.getElementById('btn-close');
  const btnPrev  = document.getElementById('btn-prev');
  const btnNext  = document.getElementById('btn-next');
  const cardTpl  = document.getElementById('card-tpl');

  document.getElementById('y').textContent = new Date().getFullYear();

  let currentIndex = 0;
  let galleryList = [];
  let lastFocus = null;

  // Helpers
  function setText(el, text) { el.textContent = text ?? ""; }
  function addCard(item, index) {
    const node = cardTpl.content.cloneNode(true);
    const img  = node.querySelector('img');
    const cap  = node.querySelector('.caption');

    if (item.width && item.height) { img.width = item.width; img.height = item.height; }
    img.src = item.thumb || item.src;
    img.alt = item.title;
    img.addEventListener('click', () => openModal(index));
    setText(cap, item.title);
    galleryGrid.appendChild(node);
  }

  async function loadImages() {
    try {
      const url = `https://api.github.com/repos/${username}/${repo}/contents/${folder}?ref=${branch}`;
      const res = await fetch(url, { headers: { 'Accept': 'application/vnd.github+json' }});
      if (!res.ok) throw new Error(\`GitHub API \${res.status}\`);
      const files = await res.json();
      if (!Array.isArray(files)) throw new Error('Unexpected response');

      let captions = {};
      try {
        const capRes = await fetch(`https://raw.githubusercontent.com/${username}/${repo}/${branch}/${folder}/gallery.json`, { cache: 'no-cache' });
        if (capRes.ok) captions = await capRes.json();
      } catch {}

      galleryList = files
        .filter(f => f.type === "file" && /\.(avif|webp|jpe?g|png)$/i.test(f.name))
        .map(f => {
          const base = f.name.replace(/\.[^.]+$/, '');
          const cap = captions[f.name] || {};
          return {
            src: f.download_url,
            thumb: cap.thumb || null,
            name: f.name,
            title: cap.title || base.replace(/[_-]/g, ' '),
            description: cap.description || "",
            width: cap.width,
            height: cap.height
          };
        });

      if (galleryList.length === 0) {
        galleryGrid.innerHTML = "<p>No images found.</p>";
        return;
      }

      galleryList.forEach(addCard);
    } catch (err) {
      console.error(err);
      galleryGrid.innerHTML = "<p>Gallery is unavailable right now. Please try again later.</p>";
    }
  }

  // Modal
  function openModal(index) {
    currentIndex = index;
    const item = galleryList[currentIndex];
    lastFocus = document.activeElement;

    document.documentElement.style.overflow = 'hidden';
    modal.classList.add('active');

    modalImg.src = item.src;
    modalImg.alt = item.title;
    setText(modalTitle, item.title);
    setText(modalDesc, item.description);

    btnClose.focus();
  }
  function closeModal() {
    modal.classList.remove('active');
    document.documentElement.style.overflow = '';
    if (lastFocus) lastFocus.focus();
  }
  function changeImage(dir) {
    currentIndex = (currentIndex + dir + galleryList.length) % galleryList.length;
    const item = galleryList[currentIndex];
    modalImg.src = item.src;
    modalImg.alt = item.title;
    setText(modalTitle, item.title);
    setText(modalDesc, item.description);
  }

  // Events
  btnClose.addEventListener('click', closeModal);
  btnPrev.addEventListener('click', () => changeImage(-1));
  btnNext.addEventListener('click', () => changeImage(1));

  // Keyboard
  document.addEventListener('keydown', e => {
    if (!modal.classList.contains('active')) return;
    if (e.key === 'Escape') closeModal();
    else if (e.key === 'ArrowRight') changeImage(1);
    else if (e.key === 'ArrowLeft') changeImage(-1);
  });

  // Click outside image closes
  modal.addEventListener('click', e => {
    if (e.target === modal) closeModal();
  });

  // Touch swipe
  let startX = 0;
  modal.addEventListener('touchstart', e => startX = e.touches[0].clientX, { passive: true });
  modal.addEventListener('touchend', e => {
    const endX = e.changedTouches[0].clientX;
    if (endX - startX > 50) changeImage(-1);
    else if (startX - endX > 50) changeImage(1);
  });

  // Reduced motion class
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    document.documentElement.classList.add('no-motion');
  }

  loadImages();
</script>
</body>
</html>
